<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"                
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                template="./WEB-INF/templates/template.xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="top">
        Edit User #{userController.user.firstName}
    </ui:define>

    <ui:define name="content">

        <h:form styleClass="form-horizontal">

            <div class="form-group">
                <h:outputLabel value="#{msg.userFirstName}"
                               styleClass="col-sm-2 control-label"/>
                <div class="col-sm-10">
                    <h:inputText 
                        id="firstName"
                        styleClass="form-control"
                        label="#{msg.userFirstName}"
                        value="#{userController.user.firstName}">
                    </h:inputText>
                    <h:message for="firstName"/>
                </div>
            </div>

            <div class="form-group">
                <h:outputLabel value="#{msg.userLastName}"
                               styleClass="col-sm-2 control-label"/>  
                <div class="col-sm-10">
                    <h:inputText 
                        id="lastName"
                        label="#{msg.userLastName}"
                        styleClass="form-control"
                        value="#{userController.user.lastName}">
                    </h:inputText>
                    <h:message for="lastName"/>
                </div>
            </div>

            <div class="form-group">
                <h:outputLabel value="#{msg.userZip}"
                               styleClass="col-sm-2 control-label"/>  
                <div class="col-sm-10">
                    <h:inputText 
                        id="zip"
                        label="#{msg.userZip}"
                        styleClass="form-control"
                        value="#{userController.user.zip}">
                        <f:ajax 
                            render="city"
                            execute="zip"
                            listener="#{userController.loadCity()}"
                            />
                    </h:inputText>
                    <h:message for="zip"/>
                </div>
            </div>

            <div class="form-group">
                <h:outputLabel value="#{msg.userCity}"
                               styleClass="col-sm-2 control-label"/>  
                <div class="col-sm-10">
                    <h:inputText 
                        id="city"
                        label="#{msg.userCity}"
                        styleClass="form-control"
                        value="#{userController.user.city}">
                    </h:inputText>
                    <h:message for="city"/>
                </div>
            </div>



            <div class="form-group">
                <h:outputLabel value="#{msg.userEmail}"
                               styleClass="col-sm-2 control-label"/>       
                <div class="col-sm-10">
                    <h:inputText 
                        id="userEmail"
                        label="#{msg.userEmail}"
                        value="#{userController.user.email}"
                        styleClass="form-control">
                    </h:inputText>
                    <h:message for="userEmail"/>
                </div>
            </div>



            <div class="form-group">                
                <h:outputLabel value="#{msg.userLastLogin}" 
                               styleClass="col-sm-2 control-label"/>  
                <div class="col-sm-10">
                    <p class="form-control-static">
                        <h:outputText value="#{userController.user.lastLogin}" />
                    </p>
                </div>
            </div>

            <br/><br/>

            <h:commandButton value="save" 
                             styleClass="btn btn-primary"
                             action="#{userController.save()}" />

        </h:form>

        <hr/>

        <h:form styleClass="form-horizontal">


            <div class="form-group">
                <h:outputLabel value="old Password"
                               styleClass="col-sm-2 control-label"/>       
                <div class="col-sm-10">
                    <h:inputText 
                        id="oldPassword"
                        label="old Password"
                        value="#{userController.oldPassword}"
                        styleClass="form-control">
                    </h:inputText>
                    <h:message for="oldPassword"/>
                </div>
            </div>


            <div class="form-group">
                <h:outputLabel value="new Password"
                               styleClass="col-sm-2 control-label"/>       
                <div class="col-sm-10">
                    <h:inputText 
                        id="newPassword"
                        label="new Password"
                        value="#{userController.newPassword}"
                        styleClass="form-control">
                    </h:inputText>
                    <h:message for="newPassword"/>
                </div>
            </div>


            <h:commandButton value="change password" 
                             styleClass="btn btn-primary"
                             action="#{userController.changePassword()}" />
        </h:form>

    </ui:define>

</ui:composition>
